pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
function createfirework(x,y)
	local fw={}
	fw.x=x
	fw.y=y
	fw.v=10
	return fw
end

function _init()
	poke(0x5f2d,1)
	poke(0x5f5c,255)
	
	fws={}
	cur={}
	
	mprim=false
	mfired=false
end

function _draw()
	cls()
	pset(cur.x,cur.y,7)
	
	for a in all(fws) do
		pset(a.x,a.y,4)
	end
	
	print(count(fws),0,0,7)
end

function _update()
	cur.x=stat(32)
	cur.y=stat(33)
	
	if (stat(34)!=1) mfired=false
	if (stat(34)==1 and mfired==false) then
		mprim=true
		mfired=true
	end
	
	if (mprim) then
		add(fws,createfirework(cur.x,cur.y))
		mprim=false	
	end
	
	-- update firework pos --
	
	local tempmt={}
	for a in all(fws) do
		a.y-=a.v
		if (a.y<127) add(tempmt,a) 
		a.v-=0.75
	end
	fws=tempmt
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
